(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{543:function(t,e,v){"use strict";v.r(e);var _=v(0),r=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"观察者设计模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#观察者设计模式"}},[t._v("#")]),t._v(" 观察者设计模式:")]),t._v(" "),e("p",[t._v("我认为大多数人都会同意观察者模式是学起来最好入门的，因为你从字面意思就能知道它主要是做什么的。")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("观察者模式")]),t._v(" 在软件设计中是一个对象，维护一个依赖列表，当任何状态发生改变自动通知它们。")])]),t._v(" "),e("p",[t._v("看吧，即使是"),e("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FObserver_pattern",target:"_blank",rel:"noopener noreferrer"}},[t._v("维基百科的定义"),e("OutboundLink")],1),t._v(" ，也不是很难, 对吧? 如果你还不清楚，我举个列子你就明白了。")]),t._v(" "),e("p",[t._v("我们假设你正在找一份软件工程师的工作，你对“香蕉公司”很感兴趣。所以你联系了他们的 HR，给了 HR 你的联系电话。如果有任何职位空缺都会通知你。这里还有几个候选人也和你一样对“香蕉公司”感兴趣。所以职位空缺大家都会被通知，如果你回应了他们的通知，他们就会联系你面试。")]),t._v(" "),e("p",[t._v("这个例子和“观察者模式”有什么关系呢？这里的“香蕉公司”就是"),e("code",[t._v("Subject")]),t._v("，用来维护"),e("code",[t._v("Observers")]),t._v("（和你一样的候选人），为某些"),e("code",[t._v("Event")]),t._v("（比如职位空缺）来"),e("code",[t._v("Notify")]),t._v("（通知）观察者。")]),t._v(" "),e("p",[t._v("是不是很简单！？")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f29c96d85d8a4c4e82b455a5e9d9ce02~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),e("p",[t._v("所以，如果你想在你的软件或者应用中实现观察者模式，你可以遵循上图这个流程。（我不想在我的文章中写任何代码，因为网上有数不清的例子）")]),t._v(" "),e("h3",{attrs:{id:"发布-订阅设计模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发布-订阅设计模式"}},[t._v("#")]),t._v(" 发布-订阅设计模式")]),t._v(" "),e("p",[t._v("在观察者模式中的"),e("code",[t._v("Subject")]),t._v("就像一个"),e("code",[t._v("发布者（Publisher）")]),t._v("，"),e("code",[t._v("观察者（Observer）")]),t._v("就是"),e("code",[t._v("订阅者（Subscriber）")]),t._v("。"),e("code",[t._v("Subject")]),t._v("通知"),e("code",[t._v("观察者（Observer）")]),t._v("就像"),e("code",[t._v("发布者（Publisher）")]),t._v("通知他的"),e("code",[t._v("订阅者（Subscriber）")]),t._v("。所以很多书和文章使用发布-订阅概念来解释观察者设计模式。但是这里还有另外一个流行的模式叫做"),e("strong",[t._v("发布-订阅设计模式")]),t._v("。它的概念和观察者模式非常类似。最大的区别是：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0df8da211b045a89fe3c8b2a87d5ecd~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),e("blockquote",[e("p",[t._v("在发布-订阅模式，消息的发送方，叫做"),e("code",[t._v("发布者（publishers）")]),t._v("，消息不会直接发送给特定的接收者，叫做"),e("code",[t._v("订阅者（Subscriber）")]),t._v("。")])]),t._v(" "),e("p",[t._v("意思就是发布者和订阅者不知道对方的存在。需要一个第三方组件，叫做"),e("code",[t._v("信息中介")]),t._v("，它将订阅者和发布者串联起来，它过滤和分配所有输入的消息。换句话说，发布-订阅模式用来处理不同系统组件的信息交流，即使这些组件不知道对方的存在。")]),t._v(" "),e("p",[t._v("那么如何过滤消息的呢？事实上这里有几个过程，最流行的方法是：基于主题以及基于内容。好了，就此打住，如果你感兴趣，"),e("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FPublish%E2%80%93subscribe_pattern%23Message_filtering",target:"_blank",rel:"noopener noreferrer"}},[t._v("可以去维基百科了解。"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/709112a52dfc4ead87dac9cff8ba0a58~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),e("p",[t._v("发布-订阅模式(图片来源: "),e("a",{attrs:{href:"https://link.juejin.cn?target=https%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fff649664.aspx",target:"_blank",rel:"noopener noreferrer"}},[t._v("MSDN 博客"),e("OutboundLink")],1),t._v(")")]),t._v(" "),e("p",[t._v("所以，我用下图表示这两个模式最重要的区别：")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/211d5dd7495641beb23bc326661599e1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp",alt:"img"}})]),t._v(" "),e("p",[t._v("图片来源: "),e("a",{attrs:{href:"https://link.juejin.cn?target=http%3A%2F%2Fdevelopers-club.com%2Fposts%2F270339%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("developers-club"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("有感觉了吗?")]),t._v(" "),e("p",[t._v("我们把这些差异快速总结一下：")]),t._v(" "),e("ul",[e("li",[t._v("在观察者模式中，观察者是知道"),e("code",[t._v("Subject")]),t._v("的，"),e("code",[t._v("Subject")]),t._v("记录了所有的观察者。然而，在发布订阅模式中，发布者和订阅者"),e("strong",[t._v("不知道对方的存在")]),t._v("。它们只有通过消息代理进行通信。")]),t._v(" "),e("li",[t._v("在发布订阅模式中，组件是松散耦合的，正好和观察者模式相反。")]),t._v(" "),e("li",[t._v("观察者模式大多数时候是"),e("strong",[t._v("同步")]),t._v("的，比如当事件触发，Subject就会去调用观察者的方法。而发布-订阅模式大多数时候是"),e("strong",[t._v("异步的")]),t._v("（使用消息队列）。")]),t._v(" "),e("li",[t._v("观察者模式需要在单个应用程序地址空间中实现，而发布-订阅更像交叉应用模式。")])]),t._v(" "),e("p",[t._v("尽管它们之间有区别，但有些人可能会说发布-订阅模式是观察者模式的变异，因为它们概念上是相似的。")]),t._v(" "),e("p",[t._v("ok，我想说的说完了，希望你get到了，感谢您的阅读，如果发现有什么错误或者需要修改的地方，请在下方留言，谢谢")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[e("strong",[t._v("发布订阅是发消息到朋友圈跟刷朋友圈，观察者是把消息群发给相关的人")])])]),t._v(" "),e("blockquote",[e("p",[t._v("作者：缪宇"),e("br"),t._v("\n链接：https://juejin.cn/post/6844903513009422343")])])])}),[],!1,null,null,null);e.default=r.exports}}]);